#ifndef _KORALI_MODULE_HPP_
#define _KORALI_MODULE_HPP_

#include "auxiliar/koraliJson.hpp"
#include "auxiliar/logger.hpp"
#include "auxiliar/math.hpp"
#include <chrono>

namespace korali {

class Experiment;

class Module
{
 public:

  std::string _type;
  std::vector<std::string> _terminationCriteria;
  korali::Experiment* _k;

  Module* getModule(nlohmann::json& js);

  virtual void initialize() { }
  virtual void finalize() { }

  virtual std::string getType() { return _type; };
  virtual bool checkTermination() { return false; };
  virtual void getConfiguration(nlohmann::json& js) {};
  virtual void setConfiguration(nlohmann::json& js) {};
  virtual void applyModuleDefaults(nlohmann::json& js) {};
  virtual void applyVariableDefaults() {};
};

extern nlohmann::json __profiler;
extern std::chrono::time_point<std::chrono::high_resolution_clock> _startTime;
extern std::chrono::time_point<std::chrono::high_resolution_clock> _endTime;
extern double _cumulativeTime;

} // namespace korali

#endif // _KORALI_MODULE_HPP_

