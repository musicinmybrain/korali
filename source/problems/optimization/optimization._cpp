#include "korali.hpp"

void Korali::Problem::Optimization::initialize()
{
 if (_k->_modelType != "Direct") koraliError("Optimization problems require defining a direct computational model. Used: %s\n", _k->_modelType.c_str());
}

void Korali::Problem::Optimization::finalize()
{

}

double Korali::Problem::Optimization::evaluateFitness(std::vector<double> sample, size_t sampleId)
{
 // Creating model data.
 Korali::Model::Direct data;
 data._sampleId = sampleId;
 data._variables = sample;

 // Executing Model
 _k->_directModel(data);

 double fitnessSign = _objective == "Maximize" ? 1.0 : -1.0;

 return fitnessSign*data._result;
}

double Korali::Problem::Optimization::evaluateLogPrior(double* sample)
{
  return 0.0;
}
