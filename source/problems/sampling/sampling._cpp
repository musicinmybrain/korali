#include "korali.hpp"

void Korali::Problem::Sampling::initialize()
{
 if (_variables.size() == 0) Korali::logError("Sampling problems require at least one variable.\n");

 if (_k->_modelType != "Direct") Korali::logError("Sampling problems require defining a direct computational model. Used: %s\n", _k->_modelType.c_str());
 if (_k->_constraints.size() > 0) Korali::logError("Sampling problems do not allow constraint definitions.\n");
}

void Korali::Problem::Sampling::finalize()
{

}

void Korali::Problem::Sampling::runModel(std::vector<double> sample, size_t sampleId)
{
 // Creating model data.
  _directModelData._sampleId = sampleId;
  _directModelData._variables = sample;

  // Executing Model
  _k->_directModel(_directModelData);
}

size_t Korali::Problem::Sampling::getSampleSize()
{
 return _variables.size();
}

Korali::Variable* Korali::Problem::Sampling::getVariable(size_t variableId)
{
 return _variables[variableId];
}

double Korali::Problem::Sampling::evaluateSampleFitness()
{
 return _directModelData._result;
}

double Korali::Problem::Sampling::evaluateSampleLogPrior(double* sample)
{
  return 0.0;
}
